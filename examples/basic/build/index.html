<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
      <title>Idyll</title>
      <meta property="og:title" content="Idyll Project">
    <meta charset="utf-8">
    <meta property="og:type" content="article">

    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="idyll-mount"><div class="idyll-root" data-reactroot="" data-reactid="1" data-react-checksum="144469378"><div class="article-header" data-reactid="2"><h1 class="hed" data-reactid="3">idyll-loader-component</h1><div class="byline" data-reactid="4"><!-- react-text: 5 -->By: <!-- /react-text --><a href="https://twitter.com/rickyreusser" data-reactid="6">Ricky Reusser</a></div></div><p data-reactid="7"><!-- react-text: 8 -->This document uses <!-- /react-text --><a href="https://github.com/idyll-lang/idyll-loader-component" data-reactid="9">idyll-loader-component</a><!-- react-text: 10 --> display content that, for one reason or another, doesnâ€™t get displayed on initial page load. You can find the document source <!-- /react-text --><a href="https://github.com/idyll-lang/idyll-loader-component/blob/master/examples/basic/index.idl" data-reactid="11">here</a><!-- react-text: 12 -->.<!-- /react-text --></p><p data-reactid="13"><!-- react-text: 14 -->To start things off with a contrived example, the blockquote below uses the <!-- /react-text --><code data-reactid="15"><!-- react-text: 16 -->Loader<!-- /react-text --></code><!-- react-text: 17 --> component.<!-- /react-text --></p><div class=" idyll-loader" data-reactid="18"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="19"><span data-reactid="20">Loading...</span></div></div><div class=" idyll-loader" data-reactid="21"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="22"><span data-reactid="23">Loading...</span></div></div><div class="relative" data-reactid="24"><div class="aside" data-reactid="25"><figure class="idyll-figure" id="figure-1" data-reactid="26"><div data-reactid="27"><div style="position:relative;height:250px;" class=" plotly idyll-loader" data-reactid="28"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="29"><span data-reactid="30">Loading...</span></div></div><div class="idyll-caption-container" style="text-align:center;" data-reactid="31"><figcaption class="idyll-caption" data-reactid="32"><div class="idyll-caption-content" data-reactid="33"><em class="idyll-caption-prefix" data-reactid="34">Figure 1.</em><p data-reactid="35"><!-- react-text: 36 -->Just a plot of <!-- /react-text --><span style="display:inline-block;" data-reactid="37"><span data-reactid="38"> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y = x + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span> </span></span></p></div></figcaption></div></div></figure></div></div><p data-reactid="39"><!-- react-text: 40 -->This could easily be used to lazy-load images. <!-- /react-text --><a href="#figure-4" data-reactid="41">Figure 4</a><!-- react-text: 42 --> at the bottom of the page does just that. The more interesting case though is using <!-- /react-text --><code data-reactid="43"><!-- react-text: 44 -->Loader<!-- /react-text --></code><!-- react-text: 45 --> to add content that pulls in sorta expensive external scripts without blocking page load. In particular, by specifying a script source, you can either load an external script on page loads or once the first component that needs it loads. Since it manages load events, you donâ€™t need to worry about ensuring the library is loaded before you use it. <!-- /react-text --><a href="#figure-1" data-reactid="46">Figure 1</a><!-- react-text: 47 --> shows a plot of <!-- /react-text --><span style="display:inline-block;" data-reactid="48"><span data-reactid="49"> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y = x + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span> </span></span><!-- react-text: 50 -->. Itâ€™s accomplished by creating <!-- /react-text --><a href="https://github.com/rreusser/idyll-loader-component/blob/master/examples/basic/components/lineplot.js" data-reactid="51">a custom component</a><!-- react-text: 52 --> with the following code:<!-- /react-text --></p><pre data-reactid="53"><code data-reactid="54"><!-- react-text: 55 -->class Lineplot extends PlotlyComponent {
  plot (gd) {
    Plotly.plot(gd, {
      data: [{
        y: [1, 2, 3]
      }], layout: {
        margin: {t: 40, r: 30, b: 30, l: 30}
      }
    });
  }
}<!-- /react-text --></code></pre><p data-reactid="56"><!-- react-text: 57 -->The <!-- /react-text --><a href="https://github.com/plotly/plotly.js" data-reactid="58">plotly.js</a><!-- react-text: 59 --> component just uses the loader, which is also very simple to use:<!-- /react-text --></p><pre data-reactid="60"><code data-reactid="61"><!-- react-text: 62 -->render () {
  return &lt;Loader src=&quot;...&quot; onLoad={this.onLoad}&gt;
    I&#x27;m content added after the script loads!
  &lt;/Loader&gt;
}<!-- /react-text --></code></pre><p data-reactid="63"><!-- react-text: 64 -->You can find the source <!-- /react-text --><a href="https://github.com/idyll-lang/idyll-loader-component/blob/master/examples/basic/components/plotly.js#L107-L117" data-reactid="65">here</a><!-- react-text: 66 -->. Itâ€™s quite a bit more complicated than it needs to be because CORS didnâ€™t work out for the external resources I was trying to load. Using the loader was simple though.<!-- /react-text --></p><div class="relative" data-reactid="67"><div class="aside" data-reactid="68"><figure class="idyll-figure" id="figure-2" data-reactid="69"><div data-reactid="70"><div style="position:relative;height:250px;" class=" plotly idyll-loader" data-reactid="71"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="72"><span data-reactid="73">Loading...</span></div></div><div class="idyll-caption-container" style="text-align:center;" data-reactid="74"><figcaption class="idyll-caption" data-reactid="75"><div class="idyll-caption-content" data-reactid="76"><em class="idyll-caption-prefix" data-reactid="77">Figure 2.</em><p data-reactid="78"><!-- react-text: 79 -->Second figure, same as the first. Except this one has a long caption that wraps nicely onto the next line because I mean captions are trivial and all, but it actually takes like twenty minutes to sit down and sort out the block/inline CSS centering stuff, plus including an equation wraps the whole thing in a <!-- /react-text --><code data-reactid="80"><!-- react-text: 81 -->p<!-- /react-text --></code><!-- react-text: 82 --> tag so that itâ€™s actually really really nice if it all Just Worksâ„¢.<!-- /react-text --></p></div></figcaption></div></div></figure></div></div><p data-reactid="83"><!-- react-text: 84 -->And for some reason <!-- /react-text --><a href="#figure-2" data-reactid="85">Figure 2</a><!-- react-text: 86 --> shows the same plot again, but hey at least it only loads the plotly cdn script once and the end-user doesnâ€™t have to worry about including the script at all. Hooray! ðŸ˜¸<!-- /react-text --></p><p data-reactid="87"><!-- react-text: 88 -->And of course it wouldnâ€™t be complete without good old json loading. In this case I downloaded the data from <!-- /react-text --><a href="plot.ly/~rreusser/99.json" data-reactid="89">plot.ly/~rreusser/99.json</a><!-- react-text: 90 --> and dropped it in my <!-- /react-text --><code data-reactid="91"><!-- react-text: 92 -->data/<!-- /react-text --></code><!-- react-text: 93 --> folder.<!-- /react-text --></p><figure class="idyll-figure" id="figure-3" data-reactid="94"><div data-reactid="95"><div style="position:relative;height:500px;" class=" plotly idyll-loader" data-reactid="96"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="97"><span data-reactid="98">Loading...</span></div></div><div class="idyll-caption-container" style="text-align:center;" data-reactid="99"><figcaption class="idyll-caption" data-reactid="100"><div class="idyll-caption-content" data-reactid="101"><em class="idyll-caption-prefix" data-reactid="102">Figure 3.</em><p data-reactid="103"><!-- react-text: 104 -->Visitors to Joshua Tree National Park from 1979 through the present. A new brochure in 2014, possibly? Source: <!-- /react-text --><a href="https://irma.nps.gov/Stats/" data-reactid="105">NPS Stats (https://irma.nps.gov/Stats/)</a></p></div></figcaption></div></div></figure><div data-reactid="106"><div style="margin-left:0;margin-right:0;" data-reactid="107"><figure class="idyll-figure" id="figure-4" data-reactid="108"><div data-reactid="109"><div class=" idyll-loader" data-reactid="110"><div style="text-align:center;background-color:#F2F3F2;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:15px;" data-reactid="111"><span data-reactid="112">Loading...</span></div></div><div class="idyll-caption-container" style="text-align:left;" data-reactid="113"><figcaption class="idyll-caption" data-reactid="114"><div class="idyll-caption-content" data-reactid="115"><em class="idyll-caption-prefix" data-reactid="116">Figure 4.</em><!-- react-text: 117 -->Pika!<!-- /react-text --></div></figcaption></div></div></figure></div></div></div></div>
    <script src="index.js"></script>
  </body>
</html>
