<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
      <title>
        idyll-loader-component
      </title>
      <meta property="og:title" content="idyll-loader-component">
    <meta charset="utf-8">
    <meta property="og:type" content="article">

      <meta property="og:description" content="A loader for idyll so your scripts don&#39;t block">
      <meta property="description" content="A loader for idyll so your scripts don&#39;t block">
    <link rel="stylesheet" href="styles.css">
  <style type="text/css">.github-corner{display:block;position:absolute;top:0;left:auto;right:0;z-index:10000}.github-corner svg{display:block}.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%{transform:rotate(0)}20%{transform:rotate(-25deg)}40%{transform:rotate(10deg)}60%{transform:rotate(-25deg)}80%{transform:rotate(10deg)}100%{transform:rotate(0)}}@media(max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></head>
  <body><a href="https://github.com/idyll-lang/idyll-loader-component" class="github-corner" aria-label="View source on Github"><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 250 250" fill="#fff">
  <path d="M0 0l115 115h15l12 27 108 108V0z" fill="#333"/>
  <path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin: 130px 106px; transform-origin: 130px 106px"/>
  <path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"/>
</svg>
</a>
    <div id="idyll-mount">
      <div class="idyll-root" data-reactroot="" data-reactid="1" data-react-checksum="-35790303"><meta title="idyll-loader-component" data-reactid="2"/><header title="idyll-loader-component" data-reactid="3"></header><p data-reactid="4"><!-- react-text: 5 -->This document uses <!-- /react-text --><link href="https://github.com/idyll-lang/idyll-loader-component" data-reactid="6"/><!-- react-text: 7 --> to build a component that displays plots using an external library without blocking the entire page.<!-- /react-text --></p><div class="loader" data-reactid="8"><div class="quote" data-reactid="9"><p data-reactid="10"><!-- react-text: 11 -->This blockquote is wrapped in <!-- /react-text --><code data-reactid="12"><!-- react-text: 13 -->Loader<!-- /react-text --></code><!-- react-text: 14 --> so that it shows up only on scroll (which is probably right away if you&#x27;re at the top of the page when loading).<!-- /react-text --></p></div></div><div class="loader" data-reactid="15"><!-- react-text: 16 -->
This text is never displayed<!-- /react-text --></div><aside data-reactid="17"><div class="fig" data-reactid="18"><div data-reactid="19"><div class="lineplot" style="height:250px;" data-reactid="20"></div><caption data-reactid="21"><p data-reactid="22"><!-- react-text: 23 -->Just a plot of <!-- /react-text --><div class="equation" data-reactid="24"><!-- react-text: 25 -->y = x + 1<!-- /react-text --></div></p></caption></div></div></aside><p data-reactid="26"><!-- react-text: 27 -->This could easily be used to lazy-load images. The more interesting case though is using <!-- /react-text --><code data-reactid="28"><!-- react-text: 29 -->Loader<!-- /react-text --></code><!-- react-text: 30 --> to add dynamic content without blocking page load. In particular, the first you can either load an external script once when the page loads or lazily once the first component that needs it loads. Since it manages load events, this all makes it a bit easier to avoid worrying about ensuring the library is loaded before you use it. <!-- /react-text --><div class="figref" data-reactid="31"></div><!-- react-text: 32 --> shows a plot of <!-- /react-text --><div class="equation" data-reactid="33"><!-- react-text: 34 -->y = x + 1<!-- /react-text --></div><!-- react-text: 35 -->. It&#x27;s accomplished by creating <!-- /react-text --><link href="https://github.com/rreusser/idyll-loader-component/blob/master/examples/basic/components/lineplot.js" data-reactid="36"/><!-- react-text: 37 --> with the following code:<!-- /react-text --></p><pre data-reactid="38"><code data-reactid="39"><!-- react-text: 40 -->class Lineplot extends PlotlyComponent {
  plot (gd) {
    Plotly.plot(gd, {
      data: [{
        y: [1, 2, 3]
      }], layout: {
        margin: {t: 40, r: 30, b: 30, l: 30}
      }
    });
  }
}<!-- /react-text --></code></pre><p data-reactid="41"><!-- react-text: 42 -->The <!-- /react-text --><link href="https://github.com/plotly/plotly.js" data-reactid="43"/><!-- react-text: 44 --> component just uses the loader, which is also very simple to use:<!-- /react-text --></p><pre data-reactid="45"><code data-reactid="46"><!-- react-text: 47 -->render () {
  return &lt;Loader src=&quot;...&quot; onLoad={this.onLoad}&gt;
    I&#x27;m content added after the script loads!
  &lt;/Loader&gt;
}<!-- /react-text --></code></pre><aside data-reactid="48"><div class="fig" data-reactid="49"><div data-reactid="50"><div class="lineplot" style="height:250px;" data-reactid="51"></div><caption data-reactid="52"><p data-reactid="53"><!-- react-text: 54 -->Second figure, same as the first. Except this one has a long caption that wraps nicely onto the next line because I mean captions trivial and all, but it actually takes like twenty minutes to sit down and sort out the block/inline CSS centering stuff, plus including an equation wraps the whole thing in a <!-- /react-text --><code data-reactid="55"><!-- react-text: 56 -->p<!-- /react-text --></code><!-- react-text: 57 --> tag so that it&#x27;s actually really really nice if it all Just Worksâ„¢.<!-- /react-text --></p></caption></div></div></aside><p data-reactid="58"><!-- react-text: 59 -->And for some reason <!-- /react-text --><div class="figref" data-reactid="60"></div><!-- react-text: 61 --> shows the same plot again, but hey at least it only loads the plotly cdn script once and the end-user doesn&#x27;t have to worry about including the script at all.<!-- /react-text --></p><p data-reactid="62"><!-- react-text: 63 -->And of course it wouldn&#x27;t be complete without good old json loading. In this case I downloaded the data from <!-- /react-text --><link href="plot.ly/~rreusser/99.json" data-reactid="64"/><!-- react-text: 65 --> and dropped it in my <!-- /react-text --><code data-reactid="66"><!-- react-text: 67 -->data/<!-- /react-text --></code><!-- react-text: 68 --> folder.<!-- /react-text --></p><div class="fig" data-reactid="69"><div data-reactid="70"><div class="plotly" src="data/99.json" style="height:500px;" data-reactid="71"></div><caption data-reactid="72"><p data-reactid="73"><!-- react-text: 74 -->Visitors to Joshua Tree National Park from 1979 through the present. A new brochure in 2014, possibly? Source: <!-- /react-text --><link href="https://irma.nps.gov/Stats/" data-reactid="75"/></p></caption></div></div></div>
    </div>
    <script src="index.js"></script>
  </body>
</html>
